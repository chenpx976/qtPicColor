# 图片颜色分析应用 - 产品设计文档

## 1. 产品概述

### 1.1 产品名称
qtPicColor - 图片颜色分析工具

### 1.2 产品定位
一个基于 PyQt6 的桌面应用程序，用于分析图片中的颜色分布，为设计师、开发者和艺术爱好者提供便捷的颜色提取和分析功能。

### 1.3 目标用户
- 设计师：需要从图片中提取配色方案
- 前端开发者：需要获取界面设计的准确颜色值
- 艺术爱好者：想要了解图片的颜色构成
- 色彩研究者：需要分析图像的色彩分布

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 图片上传功能
- **功能描述**：用户可以通过多种方式导入图片
- **具体要求**：
  - 支持点击上传区域选择文件
  - 支持拖拽图片文件到上传区域
  - 支持粘贴剪贴板中的图片（Ctrl+V）
  - 支持常见图片格式：PNG、JPG、JPEG、BMP、GIF
- **用户体验**：上传区域需要有明确的视觉提示

#### 2.1.2 颜色分析功能
- **功能描述**：分析上传图片的颜色构成
- **算法要求**：
  - 使用颜色量化算法提取主要颜色
  - 计算每种颜色在图片中的占比
  - 支持调整提取的颜色数量（建议默认 10-20 种）

#### 2.1.3 颜色可视化功能
- **功能描述**：在 1024×1024 画布上展示颜色分布
- **展示方式**：
  - 按颜色占比大小绘制色块
  - 色块大小与颜色占比成正比
  - 使用网格或蜂窝状布局展示
- **交互要求**：
  - 鼠标悬停显示颜色信息
  - 点击色块复制颜色的十六进制值

#### 2.1.4 颜色列表功能
- **功能描述**：在界面右侧列出所有提取的颜色
- **显示内容**：
  - 颜色预览块
  - 十六进制颜色值
  - RGB 值
  - 颜色占比百分比
- **交互功能**：
  - 点击任意颜色项复制颜色值
  - 支持排序（按占比、色调等）

### 2.2 辅助功能

#### 2.2.1 颜色格式转换
- 支持多种颜色格式：HEX、RGB、HSL、HSV
- 一键切换颜色格式显示

#### 2.2.2 导出功能
- 导出颜色调色板为 JSON 格式
- 导出为 Adobe Swatch Exchange (.ase) 格式
- 保存颜色分布图为图片

#### 2.2.3 历史记录
- 保存最近分析的图片记录
- 快速重新加载之前的分析结果

## 3. 界面设计

### 3.1 整体布局
```
┌─────────────────────────────────────────────────────────────┐
│                     qtPicColor                              │
├─────────────────────────────────────────────────────────────┤
│  [文件] [编辑] [视图] [帮助]                                   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────┐              ┌───────────────────┐ │
│  │                     │              │   颜色列表         │ │
│  │   图片上传区域        │              │                   │ │
│  │                     │              │ ■ #FF5733  45.2%  │ │
│  │   (拖拽或点击上传)    │              │ ■ #33FF57  23.1%  │ │
│  │                     │              │ ■ #3357FF  18.7%  │ │
│  └─────────────────────┘              │ ■ #FF33F5  8.9%   │ │
│                                       │ ■ #F5FF33  4.1%   │ │
│  ┌─────────────────────┐              │                   │ │
│  │                     │              │ [导出调色板]       │ │
│  │   颜色分布画布        │              │ [保存图片]         │ │
│  │   (1024×1024)       │              │                   │ │
│  │                     │              └───────────────────┘ │
│  │                     │                                    │
│  └─────────────────────┘                                    │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│ 状态栏: 已提取 15 种颜色 | 点击色块复制颜色值                    │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 视觉设计规范

#### 3.2.1 色彩方案
- 主色调：简洁的灰白色系
- 强调色：蓝色 (#007ACC)
- 成功色：绿色 (#28A745)
- 警告色：橙色 (#FFC107)

#### 3.2.2 字体规范
- 标题：16px, 粗体
- 正文：12px, 常规
- 颜色值：等宽字体

#### 3.2.3 间距规范
- 组件间距：16px
- 内容边距：12px
- 按钮高度：32px

## 4. 用户体验设计

### 4.1 操作流程
1. 用户启动应用
2. 拖拽或点击上传图片
3. 系统自动分析颜色
4. 在画布上显示颜色分布
5. 右侧显示颜色列表
6. 用户点击颜色复制到剪贴板
7. 可选择导出调色板

### 4.2 反馈机制
- 上传时显示进度条
- 分析完成后显示通知
- 复制颜色值时显示提示
- 错误操作时显示友好的错误信息

### 4.3 性能要求
- 图片上传响应时间 < 1秒
- 颜色分析时间 < 3秒（对于 5MB 以下图片）
- 界面操作响应时间 < 100ms

## 5. 技术约束

### 5.1 开发环境
- Python 3.8+
- PyQt6
- 使用 uv 进行包管理

### 5.2 系统兼容性
- Windows 10+
- macOS 10.14+
- Linux (Ubuntu 18.04+)

### 5.3 性能限制
- 支持最大图片尺寸：10000×10000 像素
- 最大文件大小：50MB
- 内存使用限制：500MB

## 6. 未来扩展计划

### 6.1 短期计划
- 增加更多颜色分析算法
- 支持批量处理图片
- 添加颜色搭配建议功能

### 6.2 长期计划
- 集成在线图片分析服务
- 支持视频颜色分析
- 添加 AI 驱动的色彩建议

## 7. 成功指标

### 7.1 功能指标
- 颜色提取准确率 > 95%
- 支持图片格式覆盖率 > 90%
- 系统稳定性：无崩溃运行 > 24小时

### 7.2 用户体验指标
- 用户完成一次完整分析的时间 < 30秒
- 用户界面响应时间 < 100ms
- 错误率 < 1% 